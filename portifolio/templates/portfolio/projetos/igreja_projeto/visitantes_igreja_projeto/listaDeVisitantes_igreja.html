{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Grid of Cards</title>
    <!-- Inclua o Tailwind CSS do CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- FontAwesome para ícones (opcional) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-200">

<div class="pt-12 px-4">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for visitante in visitantes %}
            <!-- Card start -->
            <div class="flex flex-col bg-white rounded-lg overflow-hidden shadow-lg h-full">
                <!-- Ajustado para flex-col e h-full -->
                <div class="px-6 py-4 flex-grow"> <!-- flex-grow para ocupar o espaço disponível -->
                    <div class="text-center my-4">
                        {% if visitante.imagem %}
                            <img class="h-32 w-32 rounded-full border-4 border-white mx-auto object-cover"
                                 src="{{ visitante.imagem.url }}" alt="Foto de {{ visitante.nome }}">
                        {% else %}
                            <img class="h-32 w-32 rounded-full border-4 border-white mx-auto object-cover"
                                 src="{% static 'portfolio/images/about/felipe.jpg' %}" alt="Imagem padrão">
                        {% endif %}

                        <h3 class="font-bold text-2xl text-gray-800 dark:text-white mb-1">{{ visitante.nome }}</h3>

                        <!-- Telefone -->
                        <div class="flex items-center justify-center text-gray-700 mb-1">
                            <i class="fas fa-phone-alt text-gray-400 dark:text-gray-600 mr-1"></i>
                            <p class="text-gray-600 text-sm">{{ visitante.telefone | default:"Não informado" }}</p>
                        </div>

                        <!-- Data -->
                        <div class="flex items-center justify-center text-gray-700 mb-1">
                            <i class="fas fa-calendar-alt text-gray-400 dark:text-gray-600 mr-1"></i>
                            <p class="text-gray-500 text-xs">{{ visitante.data | date:"d/m/Y" }}</p>
                        </div>

                        <!-- Notas -->
                        <div class="flex items-center justify-center text-gray-700 mb-1">
                            <i class="fas fa-sticky-note text-gray-400 dark:text-gray-600 mr-1"></i>
                            <p class="text-gray-400 italic text-xs">{{ visitante.nota | default:"Sem notas adicionais." }}</p>
                        </div>

                        <!-- Visitas -->
                        <div class="flex items-center justify-center text-gray-700 mb-1">
                            <i class="fas fa-user-friends text-gray-400 dark:text-gray-600 mr-1"></i>
                            <p class="text-gray-600">{{ visitante.numero_visitas }} Visitas</p>
                        </div>

                        <!-- Sexo -->
                        <div class="flex items-center justify-center text-gray-700 mb-1">
                            <!-- Ícone baseado no valor do sexo -->
                            {% if visitante.sexo == 'homem' %}
                                <i class="fas fa-mars text-gray-400 dark:text-gray-600 mr-1"></i>
                            {% elif visitante.sexo == 'mulher' %}
                                <i class="fas fa-venus text-gray-400 dark:text-gray-600 mr-1"></i>
                            {% else %}
                                <i class="fas fa-genderless text-gray-400 dark:text-gray-600 mr-1"></i>
                            {% endif %}
                            <p class="text-gray-600">{{ visitante.get_sexo_display }}</p>
                        </div>

                        <!-- Faixa Etária -->
                        <div class="flex items-center justify-center text-gray-700 mb-1">
                            <!-- Ícone baseado na faixa etária -->
                            {% if visitante.faixa_etaria == 'adulto' %}
                                <i class="fas fa-user text-gray-400 dark:text-gray-600 mr-1"></i>
                            {% elif visitante.faixa_etaria == 'jovem' %}
                                <i class="fas fa-child text-gray-400 dark:text-gray-600 mr-1"></i>
                            {% else %}
                                <i class="fas fa-baby text-gray-400 dark:text-gray-600 mr-1"></i>
                            {% endif %}
                            <p class="text-gray-600">{{ visitante.get_faixa_etaria_display }}</p>
                        </div>
                    </div>

                    <div class="p-4 border-t mx-8 mt-2">

                        <div class="flex gap-4 justify-center mt-2">

                            <a class="portfolio-link {{ visitante.id }}" data-bs-toggle="modal"
                               onclick="window.location.href='{% url 'portifolio:visitante_detalhe_igreja' pk=visitante.pk %}'">
                                <button class="rounded-full bg-blue-500 text-white font-bold py-2 px-4 hover:bg-blue-700">
                                    Detalhes
                                </button>
                            </a>

                            {% if visitante.telefone %}
                                <a href="https://api.whatsapp.com/send/?phone=351{{ visitante.telefone }}&text=Olá {{ visitante.nome }} foi um prazer tê-lo connosco na AD Pinhal Novo, esperamos anciosos pela sua visita novamente. Deus te abençoe!"
                                   class="rounded-full border-2 border-gray-300 text-gray-700 py-2 px-4 hover:border-gray-500 inline-block">
                                    Mensagem
                                </a>
                            {% else %}
                                <button class="rounded-full border-2 border-gray-300 text-gray-700 py-2 px-4 cursor-not-allowed opacity-50"
                                        disabled>
                                    Mensagem
                                </button>
                            {% endif %}
                        </div>

                    </div>
                </div>
            </div>
            <!-- Card end -->
        {% endfor %}
    </div>
</div>

</body>
</html>
